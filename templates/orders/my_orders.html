{% load static %}
{% include 'base.html' %}
{% include 'partials/navbar.html' %}

<style>
    .table-container {
        max-height: 800px;
        overflow-y: auto;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .table-container table {
        width: 100%;
        border-collapse: collapse;
    }

    .table-container th,
    .table-container td {
        padding: 12px 15px;
        text-align: center;
        vertical-align: middle;
        border-bottom: 1px solid #dee2e6;
    }

    .table-container thead {
        position: sticky;
        top: 0;
        background: linear-gradient(90deg, #5abab4, #309189);
        color: white;
        z-index: 10;
    }

    .table-container tbody tr:nth-child(odd) {
        background-color: #f9f9f9;
    }

    /* Статусы */
    .status-new {
        background-color: #ffc107;
        color: #212529;
        font-weight: bold;
        padding: 5px 10px;
        border-radius: 3px;
    }

    .status-accepted {
        background-color: #28a745;
        color: white;
        font-weight: bold;
        padding: 5px 10px;
        border-radius: 3px;
    }

    .status-completed {
        background-color: #0d6efd;
        color: white;
        font-weight: bold;
        padding: 5px 10px;
        border-radius: 3px;
    }

    .status-canceled {
        background-color: #dc3545;
        color: white;
        font-weight: bold;
        padding: 5px 10px;
        border-radius: 3px;
    }

    /* Кнопки одинакового размера */
    .order-actions .btn {
        width: 100%;
        margin-bottom: 5px;
    }

    /* Адаптивность для мобильных */
    @media (max-width: 768px) {
        .table-container table,
        .table-container thead,
        .table-container tbody,
        .table-container tr,
        .table-container th,
        .table-container td {
            display: block;
            width: 100%;
        }

        .table-container thead {
            display: none;
        }

        .table-container td {
            text-align: right;
            position: relative;
            padding-left: 50%;
            border: none;
            border-bottom: 1px solid #dee2e6;
        }

        .table-container td::before {
            content: attr(data-label);
            position: absolute;
            left: 15px;
            width: calc(50% - 20px);
            font-weight: bold;
            text-align: left;
        }

        .order-actions .btn {
            margin-bottom: 8px;
        }
    }

</style>

<div id="breadcrumb" class="section">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h3 class="breadcrumb-header">Корзина</h3>
                <ul class="breadcrumb-tree">
                    <li><a href="{% url 'home' %}">Главная</a></li>
                    <li class="active">Корзина</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="section">
    <div class="container">
        <h2>Мои заказы</h2>
        <div class="table-container">
            <table>
                <thead>
                <tr>
                    <th>ID</th>
                    <th>ФИО</th>
                    <th>Телефон</th>
                    <th>Сумма</th>
                    <th>Статус</th>
                </tr>
                </thead>
                <tbody>
                {% for order in orders %}
                    <tr>
                        <td data-label="ID">{{ order.id }}</td>
                        <td data-label="ФИО">{{ order.full_name }}</td>
                        <td data-label="Телефон">{{ order.phone }}</td>
                        <td data-label="Сумма"><strong>{{ order.total_price }} ₽</strong></td>
                        <td data-label="Статус">
                            <span class="status-{{ order.status }}">{{ order.get_status_display }}</span>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

{% include 'partials/footer.html' %}
